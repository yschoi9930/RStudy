}
View(text)
for (i in 1:length(rank_node)) {
rank_text <- html_text(rank_node[i])
rank_text <- gsub('\r|\n|\t','',rank_text) %>% str_trim()
text <- c(text,rank_text)
}
View(text)
title <-c()
for (i in 1:length(rank_node)){
tit <- html_text(rank_node[i]) %>%
str_replace_all('[[:punct:]]',"") %>%
str_replace_all("\\t|\\n","")
title <- c(title,tit)
}
title
url <- 'https://movie.naver.com/movie/sdb/rank/rmovie.nhn'
selector <-'#old_content > table > tbody > tr > td.title > div'
rank_html <- read_html(url)
rank_node <- html_nodes(rank_html,selector)
text <- c()
for (i in 1:length(rank_node)) {
rank_text <- html_text(rank_node[i])
rank_text <- gsub('\r|\n|\t','',rank_text) %>% str_trim()
text <- c(text,rank_text)
}
View(text)
rank_link <- html_attr(rank_node[1],'href') ;rank_link
rank_link <- html_attr(rank_node[2],'href') ;rank_link
url <- 'https://movie.naver.com/movie/sdb/rank/rmovie.nhn'
selector <-'#old_content > table > tbody > tr > td.title > div > a'
rank_html <- read_html(url)
rank_node <- html_nodes(rank_html,selector)
rank_text <- html_text(rank_node)
rank_text <- gsub('\r|\n|\t','',rank_text) %>% str_trim()
rank_text
rank_link <- html_attr(rank_node,'href') ;rank_link
url <- 'https://movie.naver.com/movie/sdb/rank/rmovie.nhn'
selector <-'#old_content > table > tbody > tr > td.title > div > a'
rank_html <- read_html(url)
rank_node <- html_nodes(rank_html,selector)
rank_text <- html_text(rank_node)
rank_text <- gsub('\r|\n|\t','',rank_text) %>% str_trim()
rank_text
length(rank_node)
rank_node[50]
rank_link <- html_attr(rank_node,'href') ;rank_link
base_url <- 'https://movie.naver.com/'
rank_link <- html_attr(rank_node,'href')
rank_link <-paste0(base,url,rank_link)
rank_link <-paste0(base,url,rank_link);rank_link
url <- 'https://movie.naver.com/movie/sdb/rank/rmovie.nhn'
selector <-'#old_content > table > tbody > tr > td.title > div > a'
base_url <- 'https://movie.naver.com/'
rank_html <- read_html(url)
rank_node <- html_nodes(rank_html,selector)
rank_text <- html_text(rank_node)
rank_text <- gsub('\r|\n|\t','',rank_text) %>% str_trim()
rank_text
length(rank_node)
rank_node[50]
rank_link <- html_attr(rank_node,'href')
rank_link <- html_attr(rank_node,'href') ; rank_link
Viw(rank_link)
View(rank_link)
rank_link <-paste0(base,url,rank_link)
rank_link
rank_link <- html_attr(rank_node,'href') ;
View(rank_link)
rank_link <-paste0(base_url,rank_link)
rank_link
rank_df <- data.frame(rank_text,rank_link)
View(rank_df)
review_url <- rank_link[1]
review_url <- rank_link[1] ; review_url
review_html <- read_html(review_url)
review_node <- html_nodes(review_html,selector)
review_text <- html_text(review_node)
review_text
review_url <- rank_link[1] ; review_url
selector -> '#content > div.article > div.section_group.section_group_frst > div:nth-child(5) >
div:nth-child(2) > div.score_area > div.netizen_score > div > div > em'
review_html <- read_html(review_url)
review_html <- read_html(review_url) ;review_html
review_node <- html_nodes(review_html,selector) ;review_node
review_node <- html_node(review_html,selector) ;review_node
selector -> '#content > div.article > div.section_group.section_group_frst >
div:nth-child(5) > div:nth-child(2) > div.score_area > div.netizen_score > div > div'
review_html <- read_html(review_url) ;review_html
review_node <- html_node(review_html,selector)
review_text <- html_text(review_node)
review_text
review_node <- html_noded(review_html,selector)
review_node <- html_nodes(review_html,selector)
review_text <- html_text(review_node)
review_text
selector -> '#content > div.article > div.section_group.section_group_frst >
div:nth-child(5) > div:nth-child(2) > div.score_area > div.netizen_score'
review_html <- read_html(review_url) ;review_html
review_node <- html_nodes(review_html,selector)
review_text <- html_text(review_node)
review_text
selector -> '#content > div.article > div.section_group.section_group_frst > div:nth-child(5)'
review_html <- read_html(review_url) ;review_html
review_node <- html_nodes(review_html,selector)
review_text <- html_text(review_node)
review_text
review_url <- rank_link[1] ; review_url
selector -> '#content > div.article > div.section_group.section_group_frst > div:nth-child(5)'
review_html <- read_html(review_url) ;review_html
review_node <- html_nodes(review_html,selector)
review_text <- html_text(review_node)
review_text
review_selector -> '#content > div.article > div.section_group.section_group_frst > div:nth-child(5)'
review_url <- rank_link[1] ; review_url
review_selector <- '#content > div.article > div.section_group.section_group_frst > div:nth-child(5)'
review_html <- read_html(review_url) ;review_html
review_node <- html_nodes(review_html,selector)
review_text <- html_text(review_node)
review_text
review_selector <- '#content > div.article > div.section_group.section_group_frst > div:nth-child(5) > div:nth-child(2) > div.score_area > div.netizen_score > div > div > em'
review_html <- read_html(review_url) ;review_html
review_node <- html_nodes(review_html,selector)
review_text <- html_text(review_node)
review_node <- html_nodes(review_html,review_selector)
review_text <- html_text(review_node)
review_text
review_selector <- '#content > div.article > div.section_group.section_group_frst > div:nth-child(5) > div:nth-child(2) > div.score_area > div.netizen_score > div > div > em'
review <-c()
for(i in 1:50) {
review_url <- rank_link[i]
review_html <- read_html(review_url)
review_node <- html_nodes(review_html,review_selector)
review_text <- html_text(review_node)
review <- c(review, review_text)
}
review
people_selector <- '#content > div.article > div.section_group.section_group_frst > div:nth-child(5) > div:nth-child(2) > div.score_area > div.netizen_score > div > div > em'
reporter_selector <-'#content > div.article > div.section_group.section_group_frst > div:nth-child(5) > div:nth-child(2) > div.score_area > div.special_score > div > div > em'
people_review <-c()
reporter_review <- c()
for(i in 1:50) {
review_url <- rank_link[i]
review_html <- read_html(review_url)
people_review_node <- html_nodes(review_html,people_selector)
people_review_text <- html_text(people_review_node)
peopel_review <- c(review, people_review_text)
reporter_review_node <-  html_nodes(review_html,repoter_selector)
reporter_review_text <- html_text(reporter_review_node)
reporter_review <- c(reporter_review, reporter_review_text)
}
people_selector <- '#content > div.article > div.section_group.section_group_frst > div:nth-child(5) > div:nth-child(2) > div.score_area > div.netizen_score > div > div > em'
reporter_selector <-'#content > div.article > div.section_group.section_group_frst > div:nth-child(5) > div:nth-child(2) > div.score_area > div.special_score > div > div > em'
people_review <-c()
reporter_review <- c()
for(i in 1:50) {
review_url <- rank_link[i]
review_html <- read_html(review_url)
people_review_node <- html_nodes(review_html,people_selector)
people_review_text <- html_text(people_review_node)
peopel_review <- c(review, people_review_text)
reporter_review_node <-  html_nodes(review_html,reporter_selector)
reporter_review_text <- html_text(reporter_review_node)
reporter_review <- c(reporter_review, reporter_review_text)
}
review_df <- data.frame(peopel_review,reporter_review)
people_review
people_review <-c()
reporter_review <- c()
for(i in 1:50) {
review_url <- rank_link[i]
review_html <- read_html(review_url)
people_review_node <- html_nodes(review_html,people_selector)
people_review_text <- html_text(people_review_node)
peopel_review <- c(review, people_review_text)
reporter_review_node <-  html_nodes(review_html,reporter_selector)
reporter_review_text <- html_text(reporter_review_node)
reporter_review <- c(reporter_review, reporter_review_text)
}
people_review
View(rank_df)
people_selector <- '#content > div.article > div.section_group.section_group_frst > div:nth-child(5) > div:nth-child(2) > div.score_area > div.netizen_score > div > div > em'
reporter_selector <-'#content > div.article > div.section_group.section_group_frst > div:nth-child(5) > div:nth-child(2) > div.score_area > div.special_score > div > div > em'
people_review <-c()
reporter_review <- c()
for(i in 1:50) {
review_url <- rank_link[i]
review_html <- read_html(review_url)
people_review_node <- html_nodes(review_html,people_selector)
people_review_text <- html_text(people_review_node)
peopel_review <- c(review, people_review_text)
reporter_review_node <-  html_nodes(review_html,reporter_selector)
reporter_review_text <- html_text(reporter_review_node)
reporter_review <- c(reporter_review, reporter_review_text)
}
people_review
people_review <-c()
reporter_review <- c()
for(i in 1:50) {
review_url <- rank_link[i]
review_html <- read_html(review_url)
people_review_node <- html_nodes(review_html,people_selector)
people_review_text <- html_text(people_review_node)
people_review <- c(review, people_review_text)
reporter_review_node <-  html_nodes(review_html,reporter_selector)
reporter_review_text <- html_text(reporter_review_node)
reporter_review <- c(reporter_review, reporter_review_text)
}
people_review
people_review <-c()
reporter_review <- c()
for(i in 1:50) {
review_url <- rank_link[i]
review_html <- read_html(review_url)
people_review_node <- html_nodes(review_html,people_selector)
people_review_text <- html_text(people_review_node)
people_review <- c(people_review, people_review_text)
reporter_review_node <-  html_nodes(review_html,reporter_selector)
reporter_review_text <- html_text(reporter_review_node)
reporter_review <- c(reporter_review, reporter_review_text)
}
people_review
length(people_review)
length(reporter_review)
review_url <- rank_link[47] ; review_url
review_html <- read_html(review_url) ;review_html
review_node <- html_nodes(review_html,people_selector)
review_text <- html_text(review_node)
review_text <- html_text(review_node) ;review_text
review_url <- rank_link[46] ; review_url
review_html <- read_html(review_url) ;review_html
review_node <- html_nodes(review_html,people_selector)
review_text <- html_text(review_node) ;review_text
review_url <- rank_link[50] ; review_url
review_html <- read_html(review_url) ;review_html
review_node <- html_nodes(review_html,people_selector)
review_text <- html_text(review_node) ;review_text
review_url <- rank_link[49] ; review_url
review_html <- read_html(review_url) ;review_html
review_node <- html_nodes(review_html,people_selector)
review_text <- html_text(review_node) ;review_text
review_df <- data.frame(people_review,reporter_review)
View(review_df)
url <- 'https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=%EB%AC%B8%EC%9D%98%EC%B4%88'
selector <-'#main_pack > section.sc_new.cs_school._cs_school > div > div.api_cs_wrap >
div.school_area > div:nth-child(2) > ul > li:nth-child(2) > span.txt > span > span'
html <- read_html(url)
library(rvest)
library(stringr)
html <- read_html(url)
node <- html_node(html,selector)
text <- html_text(node)
text
library(read_xl)
library(readxl)
list <- read_excel('초중등.xlsx')
list
list <- list['학교명명']
list <- list['학교명']
list
Encoding(list[1])
list[1]
Encoding(list[1,1])
list[1,1]
deframe(list)
install.packages('enframe')
library(tibble)
deframe(list)
Encoding(list[1])
list[1]
list <- deframe(list)
list[1]
Encoding(list[1])
length(list)
add <- c()
for (i in length(list)) {
name <- URLencode(list[i])
url <- paste0('https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=',name)
html <- read_html(url)
node <- html_node(html,selector)
text <- html_text(node)
add <- c(add,text)
}
add
add <- c()
name <- URLencode(list[1])
url <- paste0('https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=',name)
html <- read_html(url)
node <- html_node(html,selector)
text <- html_text(node)
text
add <- c()
for (i in length(list)) {
name <- URLencode(list[i])
url <- paste0('https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=',name)
html <- read_html(url)
node <- html_node(html,selector)
text <- html_text(node)
add <- c(add,text)
}
add
length(list)
for (i in 1:length(list)) {
name <- URLencode(list[i])
url <- paste0('https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=',name)
html <- read_html(url)
node <- html_node(html,selector)
text <- html_text(node)
add <- c(add,text)
}
add
write.xlsx(add,'주소.xlsx')
write.csv(add,'주소.xlsx')
write.csv(add,'주소.csv')
add <- c()
for (i in 1:length(list)) {
name <- URLencode(list[i])
url <- paste0('https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=',name)
html <- read_html(url)
node <- html_node(html,selector)
text <- html_text(node)
add <- c(add,text)
}
View(add)
write.csv(add,'주소.csv')
write.csv(add,'주소.csv')
list <- read_excel('초중등.xlsx')
list <- list['학교명','중학교교']
list <- list['학교명','중학교']
list <- read_excel('초중등.xlsx')
list <- list['학교명','중학교']
list <- deframe(list)
Encoding(list[1])
list
list
list[1]
list <- read_excel('초중등.xlsx')
list <- list['학교명','중학교']
list[1]
list <- list['학교명']
list <- read_excel('초중등.xlsx')
list <- list['학교명']
list[1]
list <- read_excel('초중등.xlsx')
list
list <- list['학교명','중학교교']
list
list <- list['학교명','중학교']
list
list <- read_excel('초중등.xlsx')
list
list <- list[,2:3]
list
list <- read_excel('초중등.xlsx')
list
list <- list[,3:4]
list
list <- deframe(list)
list
list <- list[,4]
list <- read_excel('초중등.xlsx')
list
list <- list[,4]
list
list <- deframe(list)
list
add <- c()
add1 <- c()
for (i in 1:length(list)) {
name <- URLencode(list[i])
url <- paste0('https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=',name)
html <- read_html(url)
node <- html_node(html,selector)
text <- html_text(node)
add1 <- c(add,text)
}
write.csv(add1,'중등.csv')
Encoding(list[1])
name <- URLencode(list[1])
name
list
add1 <- c()
for (i in 1:36) {
name <- URLencode(list[i])
url <- paste0('https://search.naver.com/search.naver?where=nexearch&sm=top_hty&fbm=0&ie=utf8&query=',name)
html <- read_html(url)
node <- html_node(html,selector)
text <- html_text(node)
add1 <- c(add1,text)
}
write.csv(add1,'중등.csv')
# 셀레니움 문법 정리
install.packages("Rselenium")
# 셀레니움 문법 정리
install.packages("RSelenium")
library(RSelenium)
remDr <- remoterDrive(remoteServerAddr='localhost', port =4445L, browserName='chrome')
remDr <- remoteDrive(remoteServerAddr='localhost', port =4445L, browserName='chrome')
library(RSelenium)
remDr <- remoteDrive(remoteServerAddr='localhost', port =4445L, browserName='chrome')
remDr <- remoteDriver(remoteServerAddr='localhost', port =4445L, browserName='chrome')
remDr$open()
remDr$Open()
remDr$open()
remDr <- remoteDriver(remoteServerAddr='localhost', port =4445L, browserName='chrome')
remDr <- remoteDriver(remoteServerAddr='localhost', port =4445L, browserName='chrome')
remDr$open() # 브라우저 열기
remDr$open() # 브라우저 열기
remDr$open() # 브라우저 열기
remDr$navigate("https://www.nike.com/kr/ko_kr/t/men/fw/nike-sportswear/CT2868-003/znmx86/air-vapormax-evo")
remDr$open() # 브라우저 열기
remDr$navigate("https://www.nike.com/kr/ko_kr/t/men/fw/nike-sportswear/CT2868-003/znmx86/air-vapormax-evo")
# 페이지 내에서 element 찾기
webElem <- remDr$findElement(using = "name", value='q')
webElem <- remDr$findElements(using ='css selector',"h3.r")
# getElementText() : 객체의 text 찾아오기
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
webElems <- remDr$findElements(using ='css selector',"h3.r")
# getElementText() : 객체의 text 찾아오기
resHeaders <- unlist(lapply(webElems, function(x){x$getElementText()}))
resHeaders
webElems <- remDr$findElements(using ='css selector',"h3.r")
# getElementText() : 객체의 text 찾아오기
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
resHeaders
remDr$navigate("http://www.google.com/ncr")
webElems <- remDr$findElements(using ='css selector',"h3.r")
# getElementText() : 객체의 text 찾아오기
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
resHeaders
webElem$sendKeysToElement(list("R Cran", key = 'enter'))
webElem$sendKeysToElement(list("R Cran","\uE007")) # \uE007 : 엔터키
## keypress to element
webElem <- remDr$findElement(using = "name", value='q')
webElem$sendKeysToElement(list("R Cran","\uE007")) # \uE007 : 엔터키
webElems <- remDr$findElements(using ='css selector',"h3.r")
# getElementText() : 객체의 text 찾아오기
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
resHeaders
# selector와 부합하는 여러 객체 중 값이 Ava~인 객체의 위치
webElem <- webElems[[which(resHeaders=='Available CRAN Packages for')]]
# 해당 하이퍼텍스트 클릭
webElem$clickElement()
remDr$getCurrentUrl()
# 해당 하이퍼텍스트 클릭
webElem$clickElement()
# selector와 부합하는 여러 객체 중 값이 Ava~인 객체의 위치
webElem <- webElems[[which(resHeaders=='Available CRAN Packages for')]]
# 해당 하이퍼텍스트 클릭
webElem$clickElement()
# getElementText() : 객체의 text 찾아오기
resHeaders <- unlist(lapply(webElems, function(x) {x$getElementText()}))
resHeaders
# selector와 부합하는 여러 객체 중 값이 Ava~인 객체의 위치
webElem <- webElems[[which(resHeaders=='Available CRAN Packages for')]]
# 해당 하이퍼텍스트 클릭
webElem$clickElement()
webElems
library(rvest)
url <- 'https://finance.naver.com/item/coinfo.nhn?code=005930&target=finsum_more'
test_data <- read_html(url, encoding = 'UTF-8')
remDr <- remoteDriver(remoteServerAddr='localhost', port =4445L, browserName='chrome')
remDr$open()
remDr$navigate(url)
frames <-  remDr$findElements(using='id',
value='coninfp_cp')
print(frames)
remDr$navigate(url)
frames <-  remDr$findElements(using='id',
value='coninfp_cp')
frames <-  remDr$findElements(using='id',
value='coninfp_cp')
print(frames)
frames <-  remDr$findElements(using='id',
value='coinfp_cp')
print(frames)
frames <-  remDr$findElements(using='id',
value='coinfo_cp')
print(frames)
# iframe이므로  frme 안으로 접근 : switchToFrame
remDr$switchToFrame(frames[[1]])
page_parse <- remDr$getPageSource() ; page_parse
page_parse <- remDr$getPageSource()[[1]] ; page_parse
page_html <- page_parse %>% read_html()
table = page_html %>%  html_table(fill=T)
page_html <- page_parse %>% read_html()
table = page_html %>%  html_table(fill=TRUE)
page_html <- page_parse %>% read_html()
table = page_html %>%  html_table(fill=TRUE)
Sys.setlocale('LC_ALL', 'Korean')
View(table[[14]])
# iframe이므로  frme 안으로 접근 : switchToFrame
remDr$switchToFrame(frames[[1]])
frames <-  remDr$findElements(using='id',
value='coinfo_cp')
# iframe이므로  frme 안으로 접근 : switchToFrame
remDr$switchToFrame(frames[[1]])
remDr$navigate(url)
frames <-  remDr$findElements(using='id',
value='coinfo_cp')
# iframe이므로  frme 안으로 접근 : switchToFrame
remDr$switchToFrame(frames[[1]])
# 현재페이지 소스 접근
page_parse <- remDr$getPageSource()[[1]] ; page_parse
page_html <- page_parse %>% read_html()
table = page_html %>%  html_table(fill=TRUE)
Sys.setlocale('LC_ALL', 'Korean')
View(table[[14]])
# 네이버 금융 기업실적분석 table 가져오기
library(stringr)
page_html <- page_parse %>% read_html()
table = page_html %>%  html_table(fill=TRUE)
